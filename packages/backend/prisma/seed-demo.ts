import { PrismaClient } from "@prisma/client";
import { DemoDataSeed } from "../src/common/seeds/demo-data.seed";

const prisma = new PrismaClient();

async function main() {
  console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
  console.log(
    "ðŸŽ­ Ð”Ð•ÐœÐž Ð¡Ð˜Ð”Ð•Ð  - Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ð¾Ð»Ð½Ð¾Ð³Ð¾ Ð½Ð°Ð±Ð¾Ñ€Ð° Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…"
  );
  console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
  console.log("");

  try {
    // Get the first organization (assumed to be zdravye-clinic from main seed)
    const organization = await prisma.organization.findFirst({
      where: { slug: "zdravye-clinic" },
    });

    if (!organization) {
      console.error(
        "âŒ ÐžÑ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð°. Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÑÐ¸Ð´ÐµÑ€:"
      );
      console.error("   pnpm db:seed");
      process.exit(1);
    }

    console.log(`ðŸ¥ ÐžÑ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ: ${organization.name}`);
    console.log(`ðŸ”— Slug: ${organization.slug}`);
    console.log("");
    console.log(
      "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    );

    // Seed demo data
    const demoSeed = new DemoDataSeed(prisma);
    const result = await demoSeed.seedDemoData(organization.id);

    console.log("");
    console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
    console.log("âœ… Ð”Ð•ÐœÐž Ð”ÐÐÐÐ«Ð• Ð£Ð¡ÐŸÐ•Ð¨ÐÐž Ð¡ÐžÐ—Ð”ÐÐÐ«!");
    console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
    console.log("");
    console.log("ðŸ“Š Ð¡Ð¢ÐÐ¢Ð˜Ð¡Ð¢Ð˜ÐšÐ:");
    console.log(
      "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    );
    console.log(`   ðŸ‘” Ð”Ð¾Ð»Ð¶Ð½Ð¾ÑÑ‚Ð¸:           ${result.titles.length}`);
    console.log(`   ðŸ‘¨â€âš•ï¸ Ð’Ñ€Ð°Ñ‡Ð¸:               ${result.doctors.length}`);
    console.log(`   ðŸ‘¥ ÐŸÐ°Ñ†Ð¸ÐµÐ½Ñ‚Ñ‹:            ${result.patients.length}`);
    console.log(`   ðŸ’¼ Ð£ÑÐ»ÑƒÐ³Ð¸:              ${result.services.length}`);
    console.log(`   ðŸ“‹ Ð¨Ð°Ð±Ð»Ð¾Ð½Ñ‹ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð¾Ð²:  ${result.protocolTemplates}`);
    console.log(`   ðŸ§ª Ð¨Ð°Ð±Ð»Ð¾Ð½Ñ‹ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¾Ð²:    ${result.analysisTemplates}`);
    console.log(`   ðŸ” Ð Ð¾Ð»Ð¸:                ${result.roles}`);
    console.log(`   ðŸ¥ Ð’Ð¸Ð·Ð¸Ñ‚Ñ‹:              ${result.visits.length}`);
    console.log(`   ðŸ“… Ð—Ð°Ð¿Ð¸ÑÐ¸ Ð½Ð° Ð¿Ñ€Ð¸Ñ‘Ð¼:     ${result.appointments}`);
    console.log(`   ðŸ“ ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ:          ${result.serviceOrders.length}`);
    console.log(`   ðŸ’° Ð¡Ñ‡ÐµÑ‚Ð°:               ${result.invoices}`);
    console.log(`   ðŸ’³ ÐŸÐ»Ð°Ñ‚ÐµÐ¶Ð¸:             ${result.payments}`);
    console.log(`   ðŸ’Š Ð ÐµÑ†ÐµÐ¿Ñ‚Ñ‹:             ${result.prescriptions}`);
    console.log(`   ðŸ”— Ð’Ñ€Ð°Ñ‡Ð¸ Ð¿Ð°Ñ†Ð¸ÐµÐ½Ñ‚Ð¾Ð²:     ${result.patientDoctors}`);
    console.log(`   âš ï¸ ÐÐ»Ð»ÐµÑ€Ð³Ð¸Ð¸:            ${result.allergies}`);
    console.log(`   ðŸ“ˆ ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¿Ð°Ñ†Ð¸ÐµÐ½Ñ‚Ð¾Ð²: ${result.parameters}`);
    console.log(
      "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    );
    console.log("");
    console.log("ðŸ”‘ Ð£Ð§ÐÐ¢ÐÐ«Ð• Ð”ÐÐÐÐ«Ð• Ð”Ð›Ð¯ Ð’Ð¥ÐžÐ”Ð:");
    console.log(
      "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    );
    console.log("   ðŸ“± Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½ Ð²Ñ€Ð°Ñ‡Ð°:  +998901000000");
    console.log("   ðŸ”’ ÐŸÐ°Ñ€Ð¾Ð»ÑŒ:         doctor123");
    console.log("");
    console.log("   Ð’ÑÐµ Ð²Ñ€Ð°Ñ‡Ð¸ (DOC-001 Ð´Ð¾ DOC-020) Ð¸Ð¼ÐµÑŽÑ‚ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ: doctor123");
    console.log("   Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½Ñ‹: +998901000000 Ð´Ð¾ +998901000019");
    console.log(
      "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    );
    console.log("");
    console.log("ðŸ“Œ Ð¡ÐžÐ’Ð•Ð¢Ð« Ð”Ð›Ð¯ Ð”Ð•ÐœÐžÐÐ¡Ð¢Ð ÐÐ¦Ð˜Ð˜:");
    console.log(
      "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    );
    console.log(
      "   â€¢ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð²Ñ€Ð°Ñ‡Ð° Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸ Ð¿Ð°Ñ†Ð¸ÐµÐ½Ñ‚Ð¾Ð²"
    );
    console.log("   â€¢ ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð¼ÐµÐ´ÐºÐ°Ñ€Ñ‚Ñƒ Ð»ÑŽÐ±Ð¾Ð³Ð¾ Ð¿Ð°Ñ†Ð¸ÐµÐ½Ñ‚Ð° Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸");
    console.log(
      "   â€¢ ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ» Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð² Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° ÑÑ‡ÐµÑ‚Ð¾Ð² Ð¸ Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹"
    );
    console.log("   â€¢ Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð½Ð° Ð¿Ñ€Ð¸Ñ‘Ð¼ Ñ‡ÐµÑ€ÐµÐ· Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ‚ÑƒÑ€Ñƒ");
    console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
  } catch (error) {
    console.error("");
    console.error(
      "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    );
    console.error("âŒ ÐžÐ¨Ð˜Ð‘ÐšÐ ÐŸÐ Ð˜ Ð¡ÐžÐ—Ð”ÐÐÐ˜Ð˜ Ð”Ð•ÐœÐž Ð”ÐÐÐÐ«Ð¥:");
    console.error(
      "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    );
    console.error(error);
    console.error(
      "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    );
    process.exit(1);
  }
}

main()
  .catch((e) => {
    console.error("ðŸ’¥ ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ°:", e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
